<launch>
	<node pkg="odom_to_pose_converter" type="odom_to_pose_converter_node" name="odom_to_pose_converter_node" output="screen">
                <remap from="odom_in" to="/icp_odom" />
		<remap from="pose" to="/icp_pose" />
        </node>

	<node pkg="scan_assembler" type="scan_assembler_node" name="scan_assembler_node" output="screen">
		<remap from="cloud_in_1" to="/rslidar16_left_points"/>
		<remap from="cloud_in_2" to="/rslidar16_right_points"/>
		<remap from="cloud_out" to="/rear_lidars_scan"/>
	</node>

	<include file="$(find bounding_box_ros)/launch/bounding_box_filter.launch"/>


        <node name="pcl_deskew_node" pkg="pointcloud_motion_deskew" type="pointcloud2_deskew_node" >
                <remap from="input_point_cloud" to="/rslidar32_points" />
                <remap from="output_point_cloud" to="/rslidar32_points_deskewed" />
        </node>

	  <!-- Elevation mapping node -->
 	 <node pkg="elevation_mapping" type="elevation_mapping" name="elevation_mapping" output="screen">
    	<rosparam command="load" file="$(find warthog_mapping)/config/robots/warthog_elevation_mapping.yaml" />
    	<rosparam command="load" file="$(find warthog_mapping)/config/elevation_maps/long_range.yaml" />
    	<rosparam command="load" file="$(find warthog_mapping)/config/postprocessing/postprocessor_pipeline.yaml" />
  	</node>


	<node pkg="norlab_icp_mapper_ros" type="mapper_node" name="mapper_node" output="screen" >
		<remap from="points_in" to="rslidar32_points_deskewed"/>
		<param name="robot_frame" value="base_link"/>
		<param name="odom_frame" value="odom"/>
		<param name="icp_config" value="$(find warthog_mapping)/params/realtime_icp_config.yaml"/>
		<param name="input_filters_config" value="$(find warthog_mapping)/params/realtime_input_filters.yaml"/>
		<param name="map_post_filters_config" value="$(find warthog_mapping)/params/realtime_post_filters.yaml"/>
		<param name="map_update_condition" value="delay"/>
		<param name="map_update_delay" value="0"/>
		<param name="sensor_max_range" value="80"/>
		<param name="min_dist_new_point" value="0.05"/>
		<param name="compute_prob_dynamic" value="true"/>
		<param name="map_tf_publish_rate" value="100"/>
	</node>
</launch>
